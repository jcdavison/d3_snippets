// Generated by CoffeeScript 1.6.3
(function(){var e,t;e=function(){function e(e,t,n){this.width=e||"500";this.height=t||"500";this.oRadius=this.width/2;this.iRadius=50;this.padding=50;this.target=d3.select(n);this.arc=d3.svg.arc().innerRadius(this.iRadius).outerRadius(this.oRadius);this.data=this.getData();this.layout=d3.layout.pie();this.pieChart=this.target.append("svg").attr("width",this.width).attr("height",this.height);this.color=d3.scale.category10().domain(d3.range(0,10));this.wedges=this.pieChart.selectAll("g").data(this.layout(this.data)).enter().append("g").attr({"class":"wedge"}).attr("transform","translate("+this.oRadius+","+this.oRadius+")");this.bindReDraw()}e.prototype.getData=function(){var e,t=this;e=[];_(6).times(function(){return e.push(Math.round(Math.random()*1e3))});return e};e.prototype.draw=function(){var e=this;console.log("DRAW",this.layout(this.data));this.wedges.append("path").attr("fill",function(t,n){return e.color(n)}).attr("d",this.arc);return this.createLabels()};e.prototype.createLabels=function(){var e=this;return this.labels=this.wedges.append("text").attr("transform",function(t){return"translate("+e.arc.centroid(t)+")"}).attr("text-anchor","middle").text(function(e){return e.value})};e.prototype.bindReDraw=function(){var e=this;return $("#redraw").click(function(){var t;t=e.getData();e.wedges.data(e.layout(t)).select("path").transition().duration(1e3).ease("bounce").attr("fill",function(t,n){return e.color(n)}).attr("d",e.arc);return e.labels.data(e.layout(t)).transition().duration(1e3).attr("transform",function(t){return"translate("+e.arc.centroid(t)+")"}).attr("text-anchor","middle").text(function(e){return e.value})})};return e}();t=new e("500","500","#coffeepiechart");t.draw()}).call(this);